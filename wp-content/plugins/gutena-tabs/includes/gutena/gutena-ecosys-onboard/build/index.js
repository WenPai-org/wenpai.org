!function(){"use strict";var e={};function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t.apply(this,arguments)}e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},e.d=function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var a=window.wp.element,n=window.wp.i18n,o=window.wp.compose,s=window.wp.hooks,c=window.wp.apiFetch,r=e.n(c),i=window.wp.blockEditor;window.wp.components;const l=e=>null==e||""==e;var u=e=>{let{name:t}=e;const[o,s]=(0,a.useState)(0);let c=!1;(0,a.useEffect)((()=>{let e=!0;return e&&r()({method:"GET",path:"/wp/v2/plugins"}).then((e=>{if(!l(e))for(let t=0;t<e.length;t++)"gutena-kit/gutena-kit"===e[t].plugin&&"inactive"===e[t].status&&(c=!0)})),()=>{e=!1}}),[]);const u=()=>{r()({method:"PUT",path:"/wp/v2/plugins/gutena-kit/gutena-kit",data:{status:"active"}}).then((e=>{s(2)})).catch((e=>{console.log("my res",e.message),s(2)}))},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btnName",t=(0,n.__)("Install Gutena kit"),a=(0,n.__)("Get access to blocks and pre-made templates.");switch(o){case 1:t=(0,n.__)("Installing...");break;case 2:t=(0,n.__)("Complete setup"),a=(0,n.__)("Gutena Kit Installed Successfully.");break;case 3:t=(0,n.__)("Failed to install")}return"btnName"===e?t:a};return 4!==o&&(0,a.createElement)(i.InspectorControls,null,(0,a.createElement)("div",{className:"gutena-inspector-cta",style:{backgroundImage:"url("+gutenaEcosysOnboardData.icons.bg_img+" )"}},(0,a.createElement)("div",{className:"gutena-cta-dismiss"},(0,a.createElement)("img",{src:gutenaEcosysOnboardData.icons.close_img,className:"gutena-cta-dismiss-icon",onClick:()=>{fetch(gutenaEcosysOnboardData.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json","X-WP-Nonce":gutenaEcosysOnboardData.nonce},body:new URLSearchParams({action:gutenaEcosysOnboardData.dismiss_action,_ajax_nonce:gutenaEcosysOnboardData.nonce})}).then((e=>e.json())).then((e=>{s(4)})).catch((e=>{console.error("Error:",e),s(4)}))}})),(0,a.createElement)("div",{className:"gutena-cta-body"},(0,a.createElement)("div",{className:"gutena-cta-logo"},(0,a.createElement)("img",{src:gutenaEcosysOnboardData.icons.logo_img,alt:"logo"})),(0,a.createElement)("div",{className:"gutena-cta-content"},(0,a.createElement)("h5",{className:"gutena-cta-discription"},d("discription")),(0,a.createElement)("div",{onClick:()=>(()=>{if(1===o)return!1;2===o&&window.open(gutenaEcosysOnboardData.gk_dashboard_url,"_blank"),s(1),!0===c?u():fetch(gutenaEcosysOnboardData.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json","X-WP-Nonce":gutenaEcosysOnboardData.nonce},body:new URLSearchParams({action:gutenaEcosysOnboardData.install_action,_ajax_nonce:gutenaEcosysOnboardData.nonce,slug:"gutena-kit"})}).then((e=>e.json())).then((e=>{(!0===e.success||!1===e.success&&"folder_exists"===e.data.errorCode)&&u()}))})(),className:"gutena-cta-install-btn "+(1===o?"start-installing":"")},2!==o&&(0,a.createElement)("img",{src:gutenaEcosysOnboardData.icons.install_img,alt:"install-icon",className:"gutena-cta-icon"}),d("btnName"),2===o&&(0,a.createElement)("img",{src:gutenaEcosysOnboardData.icons.right_arrow_dark,alt:"link-icon",className:"gutena-cta-icon"})),(0,a.createElement)("a",{className:"gutena-cta-web-link",href:gutenaEcosysOnboardData.gutena_weblink,target:"_blank"},(0,n.__)("Visit Website"),(0,a.createElement)("img",{src:gutenaEcosysOnboardData.icons.right_arrow,alt:"link-icon",className:"gutena-cta-icon"}))))))};const d=(0,o.createHigherOrderComponent)((e=>n=>{const{name:o}=n;return[-1!==gutenaEcosysOnboardData.gutena_plugins_blockname.indexOf(o)&&(0,a.createElement)(u,t({key:"gutenacta"},n)),(0,a.createElement)(e,t({key:"edit"},n))]}),"withGutenaKitInstallCTA");l(gutenaEcosysOnboardData)||"1"!=gutenaEcosysOnboardData.gutena_kit_require||(0,s.addFilter)("editor.BlockEdit","gutena/editor/with-gutenakit-install-cta",d)}();